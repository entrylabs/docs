---
layout: page
title: 하드웨어 모듈화
type: guide
category: 'Entry HW'
order: 6
---


> 현재 하드웨어 모듈화 기능은 기획단계로, 아직 Entry, Entry-hw에 적용되어 있지 않습니다.
>
> 또한, 이 문서의 내용은 추후 기획에 따라 변경될 수 있습니다.

## 하드웨어 모듈화란?

### 모듈

엔트리 내 특정 하드웨어를 구동 및 노출시키기 위한 일련의 데이터들을 한군데 묶은 파일을 의미합니다.

모듈에는 아래와 같은 파일들이 포함될 예정입니다.

- metadata.json
  - moduleName : 모듈 다운로드나 검색에 사용될 고유명입니다.
  - version : 버전 정보입니다. 표기법은 semver를 따릅니다.
  - block : 블록파일 경로입니다.
  - image : 이미지 파일 경로입니다. 
  - type : 추후 모듈화 확장시 사용할 구분자입니다.
  - moduleFile : 추가적인 파일이 필요한 경우 사용하는 옵션 프로퍼티입니다.
- block_module.js
- image.png
- module file



### 모듈화

모듈파일을 엔트리에 제출하는 것으로, 기존에 하드웨어 하나를 구동하는데 필요한 모든 반영을 완료하는 프로세스입니다.

버전을 관리할 수 있는 **하드웨어 모듈**과 최신버전만을 사용하는 간편한 **하드웨어 라이트 모듈** 두 가지로 제공될 예정입니다. 

기존의 하드웨어 프로그램을 사용하는 방법과 기획중인 웹시리얼을 사용하는 방법으로 제공될 예정입니다.





## 워크플로우

### 모듈 사용 워크플로우(from 엔트리 하드웨어)

1. 하드웨어 프로그램이 서버에서 모듈리스트를 받습니다.
2. 유저가 필요한 모듈을 클릭하여 해당 모듈을 다운로드 요청합니다.
3. 서버에서 해당 모듈을 다운로드 받습니다.
4. 다운받은 모듈을 module 디렉토리에 압축해제하여 저장합니다.
5. 파일시스템에서 json리스트를 재스캔합니다.
6. 하드웨어 프로그램의 렌더러 프로세스가 리스트의 변경사항을 감지합니다.



### 모듈 등록 워크플로우

1. 하드웨어 제조사에서는 모듈에 필요한 파일들을 entry_module_maker를 사용해 단일 모듈파일로 만듭니다.
2. 만들어진 모듈파일을 모듈 등록 페이지(추후 웹으로 제공예정)에 접속하여 업로드합니다.
3. 엔트리의 모듈 서버에서 validation 체크를 하여 이상이 없으면 등록됩니다.
4. 제조사는 모듈 등록 페이지에서 업로드한 모듈을 다운로드 함으로써 업로드된 파일에 이상이 없는지 체크 할 수 있습니다.



## 구조
### 사용 레포지토리(from entrylabs/)

- entry-hw-server : 모듈사용에 발생할 수 있는 보안 문제를 담당합니다.

- entry-module-service : 모듈파일에 대한 CRUD 작업을 수행합니다.

- entryjs : entry-hw에게 받은 모듈블럭을 entry-hw-server를 통해 인증하고 사용합니다.

- entry-hw : 사용할 모듈을 사용자에게 시각적으로 보여주고 entryjs에게 모듈블럭 정보를 송신합니다.



## Entry-offline에서는 어떻게 적용되나요?

entry-offline은 인터넷에 연결되있지 않는 경우도 고려해야 합니다. 

따라서 entry-offline이 배포되는 시점으로부터 1달 전에 등록된 하드웨어 모듈정보를 전부 포함하게 될 예정입니다.
